<app-header />

<main class="cart-page">
    <h1 class="cart-title">Your Cart</h1>

    <ng-container *ngIf="items.length > 0; else emptyCart">
        <div class="cart-layout">

            <!-- Items -->
            <section class="cart-items">
                <div class="cart-item" *ngFor="let item of items">
                    <img [src]="item.image" [alt]="item.name" class="item-img" />

                    <div class="item-info">
                        <h3>{{ item.name }}</h3>
                        <p class="item-meta">{{ item.brand }} ¬∑ {{ item.type }}</p>
                        <p class="item-price">${{ item.price.toFixed(2) }}</p>
                    </div>

                    <div class="item-controls">
                        <div class="quantity-selector">
                            <button (click)="decrement(item)">-</button>
                            <input type="number" [value]="item.quantity" (change)="updateQuantity(item.id, $event)"
                                min="1" />
                            <button (click)="increment(item)">+</button>
                        </div>
                        <p class="item-total">${{ (item.price * item.quantity).toFixed(2) }}</p>
                    </div>

                    <button class="remove-btn" (click)="removeItem(item.id)" title="Remove">‚úï</button>
                </div>
            </section>

            <!-- Order Summary -->
            <aside class="cart-summary">
                <h2>Order Summary</h2>

                <div class="summary-items">
                    <div class="summary-item-row" *ngFor="let item of items">
                        <span class="summary-item-name">{{ item.name }} <span class="summary-qty">x{{ item.quantity
                                }}</span></span>
                        <span>${{ (item.price * item.quantity).toFixed(2) }}</span>
                    </div>
                </div>

                <div class="summary-divider"></div>

                <div class="summary-row">
                    <span>Subtotal</span>
                    <span>${{ subtotal.toFixed(2) }}</span>
                </div>
                <div class="summary-row">
                    <span>Tax (8%)</span>
                    <span>${{ tax.toFixed(2) }}</span>
                </div>
                <div class="summary-row total-row">
                    <span>Total</span>
                    <span>${{ total.toFixed(2) }}</span>
                </div>

                <button class="checkout-btn">Proceed to Checkout</button>
                <button class="clear-btn" (click)="clearCart()">Clear Cart</button>
                <a routerLink="/products" class="continue-link">‚Üê Continue Shopping</a>
            </aside>

        </div>
    </ng-container>

    <ng-template #emptyCart>
        <div class="empty-cart">
            <p>üõí Your cart is empty.</p>
            <a routerLink="/products" class="continue-link">Browse Products</a>
        </div>
    </ng-template>
</main>

<app-footer />